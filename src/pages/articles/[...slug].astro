---
import ArticleLayout from "@layouts/article-layout.astro";

export function getStaticPaths() {
    const articles = Object.values(import.meta.glob("../../articles/*.astro", { eager: true })) satisfies Array<{
        file: string;
    }>;

    return articles.map((article) => ({
        params: { slug: article.file.split("/").at(-1)?.split(".").at(0) },
    }));
}

const { slug } = Astro.params;
const { default: Page, title, cover, coverAttribution, date, subtitle } = await import(`../../articles/${slug}.astro`);
---

<ArticleLayout {title} slug={slug!} {cover} {date} {subtitle} {coverAttribution}>
    <Page />
</ArticleLayout>
