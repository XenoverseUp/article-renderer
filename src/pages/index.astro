---
import Layout from "@layouts/layout.astro";
import BusinessCard from "@components/business-card.astro";
import Spacer from "@components/spacer.astro";

import "@css/home.css";

const articles = Object.values(import.meta.glob("../articles/content/*.astro", { eager: true })) satisfies Array<{
    file: string;
    title: string;
    cover: string;
    date: Date;
    subtitle?: string;
}>;
---

<Layout>
    <main>
        <article>
            <header>
                <h1>
                    Hey! I'm Can <strong>&mdash;</strong>
                    <br />
                    a <em>software engineer</em> based in Istanbul.
                </h1>
                <p>I like talking about stuff I have found interesting. So, here is my notepad.</p>
            </header>

            <div class="content">
                <section>
                    <h2>Here are the projects I'm currently proud of</h2>
                    <ol>
                        <li>
                            <h3>Progressive Rock &amp; Oriental Turkish Music</h3>
                            <p>
                                Not a common blend but progressive rock makes me appreciate skillful artists while I feel <em
                                    >deep</em
                                > emotions through Turkish music.
                            </p>
                        </li>
                        <li>
                            <h3>Creative Programming</h3>
                            <p>Really, I love her, too.</p>
                        </li>
                        <li>
                            <h3>Maths &amp; Computer Graphics</h3>
                            <p>You wouldn't believe but I love him, as well.</p>
                        </li>
                    </ol>
                </section>

                <section>
                    <h2>And here are my posts</h2>

                    <ol>
                        {
                            articles
                                .sort((a, b) => (a.date < b.date ? 1 : -1))
                                .map((item) => {
                                    const slug = item.file.split("/").at(-1)?.split(".").at(0) ?? "";
                                    return (
                                        <a data-astro-prefetch="viewport" href={`/articles/${slug}`} class="card">
                                            <li>
                                                <h3>{item.title}</h3>
                                            </li>
                                        </a>
                                    );
                                })
                        }
                    </ol>
                </section>

                <section>
                    <h2>Contact</h2>
                    <p>Well, here is my business card. Have it!</p>
                    <Spacer space={1} />
                    <BusinessCard />
                </section>
            </div>
        </article>
    </main>
</Layout>
