---
import { Picture } from "astro:assets";

interface Props {
    slug: string;
}

const { slug } = Astro.props;

let post = null;
let cover = null;

try {
    post = await import(`../articles/${slug}.astro`);
    cover = await import(`../assets/article-cover/${post.cover}`);
} catch (error) {
    console.error(`Article Card slug "${slug}" is not found. This should be an unreachable error!`);
}
---

{
    !post ? (
        <Fragment />
    ) : (
        <a data-astro-prefetch href={`/articles/${slug}`} class="card">
            <div class="cover-container">
                <Picture src={cover.default} alt="img" class="cover" />
            </div>
            <div class="content">
                <h3>{post.title}</h3>
                <p>12 January 2025</p>
            </div>
        </a>
    )
}

<style>
    .card {
        aspect-ratio: 1 / 1;
        width: calc(50% - var(--bank-gap) / 2);

        display: flex;
        flex-direction: column;
        text-decoration: none;
    }

    .cover-container {
        aspect-ratio: 1 / 1;
        width: 100%;
        height: 100%;
        background: rgba(0 0 0 / 0.1);
        overflow: hidden;
    }

    .cover {
        aspect-ratio: 1 / 1;
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .content {
        padding: 0.5rem;
    }

    h3 {
        font-size: 1rem;
        margin-bottom: 0.5em;
    }

    p {
        font-size: 0.7rem;
    }
</style>
